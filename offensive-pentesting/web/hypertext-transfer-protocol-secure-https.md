# Hypertext Transfer Protocol Secure \(HTTPS\)

## Обзор HTTPS

Одним из основных недостатков HTTP является то, что все данные передаются в виде открытого текста, а это означает, что любой, кто находится между источником и получателем, может выполнить атаку Man-in-the-middle \(MiTM\) для просмотра переданных данных. Это серьезная проблема с банковскими и правительственными веб-сайтами, которые содержат конфиденциальные данные пользователей.

Это можно проверить с помощью сетевого анализатора, такого как [Wireshark](https://en.wikipedia.org/wiki/Wireshark). В следующем примере демонстрируется эффект отказа от обеспечения безопасного обмена данными между веб-браузером и веб-приложением. Если мы попытаемся войти на небезопасный веб-сайт во время мониторинга сетевого трафика с помощью графического анализатора протокола пакетной сети, такого как [Wireshark](https://en.wikipedia.org/wiki/Wireshark), мы увидим, что учетные данные для входа могут быть перехвачены в виде открытого текста. Это упростит для кого-либо в той же сети \(например, в общедоступной беспроводной сети\) их захват и использование в злонамеренных целях.

![](../../.gitbook/assets/image%20%2811%29.png)

Как показано ниже, злоумышленник, перехватывающий сетевой трафик, сможет просмотреть всю последовательность входа в систему, показывая запрос входа \(вместе с предоставленными именем пользователя и паролем\) и перенаправление на страницу административной панели мониторинга после успешной попытки входа в систему.

![](../../.gitbook/assets/image%20%2810%29.png)

Эти недостатки привели к появлению [протокола HTTPS \(HTTP Secure\)](https://tools.ietf.org/html/rfc2660). Когда этот протокол включен, вся связь между клиентом \(пользователем, получающим доступ к веб-приложению через свой веб-браузер\) и веб-сервером, на котором размещено веб-приложение, зашифрована. Когда HTTPS реализуется в веб-приложении, становится невозможным для кого-либо перехватывать и анализировать трафик и собирать информацию, такую как учетные данные и другие конфиденциальные данные.

Веб-сайты, применяющие HTTPS, можно идентифицировать по `https: //` в [URL-адресе](https://en.wikipedia.org/wiki/URL) \(т. е. https://www.google.com\), а также по значку замка в адресной строке веб-браузера слева от [URL-адреса](https://en.wikipedia.org/wiki/URL).

![](../../.gitbook/assets/image%20%2813%29.png)

[Порт](https://en.wikipedia.org/wiki/Port_%28computer_networking%29) по умолчанию для HTTPS - 443, который предпочтительнее для браузеров, чем порт HTTP 80, при условии, что нет неправильных настроек, позволяющих пользователю просматривать небезопасную HTTP-версию веб-сайта вместо HTTPS-версии. Запуск Wireshark при переходе на [https://google.com](https://google.com) показывает, что трафик, проходящий по сети, зашифрован.

![](../../.gitbook/assets/image%20%2812%29.png)

В приведенном выше примере мы видим, что весь трафик при переходе на [https://google.com](https://google.com) зашифрован.

## HTTPS поток

![](../../.gitbook/assets/image%20%289%29.png)

Давайте посмотрим, как HTTPS работает на высоком уровне. При просмотре [http://inlanefreight.com](http://inlanefreight.com) браузер пытается разрешить домен и перенаправляет пользователя на веб-сервер, на котором размещен целевой веб-сайт. Запрос сначала отправляется на порт 80, который является незашифрованным протоколом HTTP. Сервер обнаруживает это и вместо этого перенаправляет клиента на защищенный порт HTTPS 443. Это делается с помощью кода ответа 301 перемещен навсегда.

Затем клиент \(веб-браузер\) отправляет пакет приветствия клиента, сообщая о себе. После этого сервер отвечает «привет серверу», после чего происходит обмен ключами. Клиент проверяет этот [ключ](https://www.cloudflare.com/learning/ssl/what-happens-in-a-tls-handshake) и отправляет свой собственный. После этого инициируется зашифрованное рукопожатие, чтобы проверить, правильно ли работают шифрование и передача.

Как только рукопожатие завершается успешно, продолжается обычная HTTP-связь, которая после этого шифруется. 

В зависимости от обстоятельств злоумышленник может выполнить [атаку перехода на более раннюю версию HTTP](https://ru.other.wiki/wiki/Downgrade_attack), которая понижает связь HTTPS до HTTP. Это делается путем настройки атаки «[человек посередине» \(MITM\)](https://ru.wikipedia.org/wiki/%D0%90%D1%82%D0%B0%D0%BA%D0%B0_%D0%BF%D0%BE%D1%81%D1%80%D0%B5%D0%B4%D0%BD%D0%B8%D0%BA%D0%B0) и проксирования \(передачи\) всего трафика через хост злоумышленника без ведома пользователя. Успешная атака перехода на более раннюю версию приведет к передаче данных HTTP в открытом виде, которые злоумышленник может зарегистрировать, а затем изучить или использовать в злонамеренных целях.

