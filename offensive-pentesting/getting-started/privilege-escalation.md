# Privilege Escalation

Наш первоначальный доступ к удаленному серверу обычно осуществляется пользователем с низкими привилегиями, что не дает нам полного доступа через компьютер. Чтобы получить полный доступ, нам нужно будет найти внутреннюю / локальную уязвимость, которая повысит наши привилегии до пользователя root в Linux или администратора / пользователя SYSTEM в Windows. Давайте рассмотрим некоторые общие методы повышения наших привилегий.

## PrivEsc Checklists

Как только мы получим начальный доступ к ящику, мы хотим тщательно перечислить ящик, чтобы найти любые потенциальные уязвимости, которые мы можем использовать для достижения более высокого уровня привилегий. Мы можем найти в Интернете множество контрольных списков и шпаргалок, в которых есть набор проверок, которые мы можем запустить, и команды для выполнения этих проверок. Отличный ресурс - [HackTricks](https://book.hacktricks.xyz/), в котором есть отличный контрольный список для локального повышения привилегий как в [Linux](https://book.hacktricks.xyz/linux-unix/linux-privilege-escalation-checklist), так и в [Windows](https://book.hacktricks.xyz/windows/checklist-windows-privilege-escalation). Еще один отличный репозиторий - [PayloadsAllTheThings](https://github.com/swisskyrepo/PayloadsAllTheThings), в котором также есть контрольные списки для [Linux](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Linux%20-%20Privilege%20Escalation.md) и [Windows](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Windows%20-%20Privilege%20Escalation.md). Мы должны начать экспериментировать с различными командами и методами и познакомиться с ними, чтобы понять многочисленные слабые места, которые могут привести к повышению наших привилегий.

## Enumeration Scripts

Многие из вышеперечисленных команд могут автоматически запускаться со сценарием для просмотра отчета и поиска слабых мест. Мы можем запустить множество скриптов для автоматического перечисления сервера, выполнив общие команды, которые возвращают любые интересные результаты. Некоторые из распространенных скриптов перечисления Linux включают [LinEnum](https://github.com/rebootuser/LinEnum.git) и [linuxprivchecker](https://github.com/sleventyeleven/linuxprivchecker), а для Windows включают [Seatbelt](https://github.com/GhostPack/Seatbelt) и [JAWS](https://github.com/411Hall/JAWS).

Еще один полезный инструмент, который мы можем использовать для перечисления серверов, - это [Privilege Escalation Awesome Scripts SUITE \(PEASS\)](https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite), поскольку он поддерживается в актуальном состоянии и включает сценарии для перечисления как Linux, так и Windows.

{% hint style="info" %}
Эти сценарии будут запускать множество команд, известных для выявления уязвимостей, и создавать много «шума», который может запускать антивирусное программное обеспечение или программное обеспечение для мониторинга безопасности, которое ищет эти типы событий. Это может помешать запуску сценариев или даже вызвать тревогу о взломе системы. В некоторых случаях мы можем захотеть выполнить перечисление вручную вместо запуска скриптов.
{% endhint %}

Давайте возьмем пример запуска Linux-скрипта из PEASS под названием LinPEAS:

```bash
spike@htb[/htb]$ ./linpeas.sh
...SNIP...

Linux Privesc Checklist: https://book.hacktricks.xyz/linux-unix/linux-privilege-escalation-checklist
 LEYEND:
  RED/YELLOW: 99% a PE vector
  RED: You must take a look at it
  LightCyan: Users with console
  Blue: Users without console & mounted devs
  Green: Common things (users, groups, SUID/SGID, mounts, .sh scripts, cronjobs)
  LightMangenta: Your username


====================================( Basic information )=====================================
OS: Linux version 3.9.0-73-generic
User & Groups: uid=33(www-data) gid=33(www-data) groups=33(www-data)
...SNIP...
```

Как мы видим, после запуска скрипт начинает собирать информацию и отображать ее в отличном отчете. Давайте обсудим некоторые уязвимости, которые мы должны искать в выходных данных этих скриптов.

## Kernel Exploits

